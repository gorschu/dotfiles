#!/bin/bash
# run_onchange_after - installs AI CLI tools via npm to user-space
# Hash: ai-cli-tools-v1  # Bump this to force reinstall

set -euo pipefail

echo "Installing AI CLI tools..."

# Claude Code CLI (Anthropic)
if ! command -v claude &>/dev/null; then
  echo "  Installing Claude Code CLI..."
  npm install -g @anthropic-ai/claude-code
else
  echo "  ✓ Claude Code CLI already installed"
fi

# OpenAI Codex CLI
if ! command -v codex &>/dev/null; then
  echo "  Installing OpenAI Codex CLI..."
  npm install -g @openai/codex
else
  echo "  ✓ OpenAI Codex CLI already installed"
fi

# GitHub Copilot CLI
if ! command -v copilot &>/dev/null; then
  echo "  Installing GitHub Copilot CLI..."
  npm install -g @github/copilot
else
  echo "  ✓ GitHub Copilot CLI already installed"
fi
