---
# Ansible playbook for traditional Fedora Workstation setup
# Mirrors the blue-build Silverblue configuration
#
# Usage: ansible-playbook local.yml --ask-become-pass
# Usage (specific roles): ansible-playbook local.yml --tags base,multimedia -K

- name: Configure Fedora Workstation
  hosts: localhost
  connection: local

  vars_files:
    - vars/general.yml

  roles:
    - role: networking
      tags: [networking, tailscale]
      vars:
        networking_tailscale_oauth_client_id: "{{ vault_tailscale_oauth[hostname].client_id }}"
        networking_tailscale_oauth_client_secret: "{{ vault_tailscale_oauth[hostname].client_secret }}"
    - role: base
      tags: [base, repos]
    - role: btrbk
      tags: [btrbk, storage, backup]
    - role: resticprofile
      tags: [resticprofile, backup]
    - role: smartcard
      tags: [smartcard, gpg]
    - role: virtualization
      tags: [virtualization, incus, docker, containers]
    - role: multimedia
      tags: [multimedia, codecs]
    - role: desktop
      tags: [desktop, gui]
    - role: beyondcompare
      tags: [desktop, beyondcompare]
    - role: hyprland
      tags: [hyprland, wayland]
    - role: niri
      tags: [niri, wayland]
# vim: set ft=yaml.ansible:
